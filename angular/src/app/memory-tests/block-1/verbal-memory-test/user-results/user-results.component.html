<div class="user-results-container">
  <div *ngIf="isLoading" class="loading">
    Загрузка данных...
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="!isLoading && !error">
    <div class="welcome-section">
      <h1>Добро пожаловать, {{ userData?.username || 'Пользователь' }}!</h1>
    </div>

    <div class="user-info-section">
      <div class="info-card">
        <h2>Информация о пользователе</h2>
        <div class="info-content">
          <p><strong>Email:</strong> {{ userData?.email }}</p>
          <p><strong>Возраст:</strong> {{ userData?.age }}</p>
          <p><strong>Пол:</strong> {{ userData?.gender }}</p>
        </div>
        <div class="danger-zone">
          <button class="delete-account-btn" (click)="deleteAccount()">
            Удалить аккаунт
          </button>
        </div>
      </div>
    </div>

    <div class="results-section">
      <div class="results-card">
        <h2>Результаты тестов</h2>
        <div class="results-content">
          <table class="results-table" *ngIf="userResults && userResults.length > 0">
            <thead>
              <tr>
                <th>Дата</th>
                <th>Результат</th>
                <th>Процент</th>
                <th>Уровень</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let result of userResults">
                <td>{{ result.date | date:'dd.MM.yyyy HH:mm' }}</td>
                <td>{{ result.score }}</td>
                <td>{{ result.percent }}%</td>
                <td>{{ result.level || 'Не указан' }}</td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="!userResults || userResults.length === 0" class="no-results">
            У вас пока нет результатов тестов
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
